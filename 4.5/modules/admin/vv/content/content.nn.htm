<h1>Страницы сайта</h1>

<script src="/mjs/admin-vv-content/content.js" defer></script>

<div id="content_app" style="display: none">


    {{capture name="vted_header"}}
        <strong>{{"row.uri"|js}}</strong> {{"row.title"|js}} <span class="tag is-primary"># {{"row.id"|js}}</span>
    {{/capture}}

    {{capture name="list"}}
        {{include file="db:_comp/vted,controls" controls_type="top"}}

        {{include file="db:page/vue_paginator"}}

        <table class="table is-fullwidth">
            <thead>
            <tr>
                <th width="5%" class="has-text-centered"><button type="button" class="button is-small is-white" @click="select_inverse()"><i class="fa fa-check-square-o"></i></button></th>
                <th width="10%">
                    Id
                </th>

                <th width="20%">
                    URI
                </th>
                <th width="50%">
                    Название страницы
                </th>
                <th width="15%" class="has-text-right">
                    Действия
                </th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="(row, index) in lst">
                <td>
                    <input type="checkbox" v-model="row.checked"/>
                </td>
                <td>{{"row.id"|js}}
                </td>
                <td>
                    <a :href="row.ilink" @click="navigate(row.ilink, $event)">{{"row.uri"|js}}</a>
                </td>
                <td>
                    <a :href="row.ilink" @click="navigate(row.ilink, $event)">{{"row.title"|js}}</a>
                </td>
                <td>
                    {{include file="db:_comp/vted,row_controls"}}
                </td>
            </tr>
            </tbody>
        </table>

        {{include file="db:page/vue_paginator"}}

        <div class="columns">
            <div class="column">
                <button class="button is-info is-outlined" type="button" @click.stop="export_selected">Экспортировать выбранные</button>
            </div>
            <div class="column has-text-right">
                <button class="button is-info is-outlined" type="button" @click.stop="open_import">Импорт</button>
            </div>
        </div>


        <modal id="importExportModal" :submit="submit_import">
            <template slot="header">
                Экспорт / импорт страниц сайта
            </template>

            <textarea class="textarea" rows="10" v-model="content_json">

        </textarea>

            <template slot="actions">
                <button type="submit" class="button is-success">Импорт</button>
            </template>
        </modal>
    {{/capture}}

    {{capture name="buttons_pre"}}
        <a :href="selected_row.uri" class="button is-info is-outlined">
            <i class="fa fa-eye"></i> &nbsp;
            Просмотр</a>
    {{/capture}}
    {{include file="db:_comp/vted"}}



</div>
<div class="app-loading">
    {{include file="db:inc/spinner"}}
</div>

<script>
    var string_imported = "Успешно импортировано";
</script>
